import{r as m,j as e,t as d,p as c,e as p,s as h}from"./index-sTG9eUEc.js";import{L as f}from"./language_selector-GlyNp35i.js";import{T as w}from"./Trans-DhlDi-PY.js";import"./dropdown-Obo7RNHz.js";function I(){const l=m.useRef([]);m.useEffect(()=>{for(let r=0;r<100;r++)l.current.push({x:window.innerWidth/100*r,y:Math.random()*window.innerHeight,speed:Math.random()+.5,index:r});const n=document.getElementById("bg_canvas"),i=n?.getContext("2d");let s=performance.now();function a(){if(!i)return;const r=performance.now(),g=(r-s)/1e3;s=r,n.width=window.innerWidth,n.height=window.innerHeight,i.clearRect(0,0,n.width,n.height),i.beginPath(),l.current.forEach(t=>{i.arc(t.x,t.y,5,0,2*Math.PI),t.x=window.innerWidth/100*t.index+Math.sin((performance.now()+t.index*2)*.005)*t.speed*10,t.y+=g*t.speed*12,t.y>window.innerHeight&&(t.y=-10)}),i.fillStyle="#ffffff55",i.fill(),requestAnimationFrame(a)}const o=document.getElementById("signup_form");o.style.scale="1",o.style.opacity="1",setTimeout(()=>{document.getElementById("bg_thing2").style.scale="1"},500),setTimeout(()=>{document.getElementById("bg_thing1").style.scale="1"},1200),a()},[]);function u(){const n=document.getElementById("email_input"),i=document.getElementById("password_input"),s=document.getElementById("signup_form");if(n.value.trim()===""||i.value.trim()===""){s.classList.add("error"),setTimeout(()=>{s.classList.remove("error")},1e3);return}fetch(`${p}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.value,password:i.value})}).then(a=>{a.json().then(o=>{a.ok?(localStorage.setItem("token",o.token),localStorage.setItem("email",n.value),localStorage.setItem("username",o.username),localStorage.setItem("id",o.id),localStorage.setItem("justLoggedIn",!0),c("/")):(h(o.msg||"Unknown error"),s.classList.add("error"),setTimeout(()=>{s.classList.remove("error")},1e3))})})}return e.jsxs("div",{className:"App",id:"app",children:[e.jsx("canvas",{id:"bg_canvas"}),e.jsx("div",{id:"bg_thing1"}),e.jsx("div",{id:"bg_thing2"}),e.jsxs("div",{className:"SignupForm",id:"signup_form",children:[e.jsx("input",{id:"email_input",placeholder:d("email")}),e.jsx("input",{id:"password_input",placeholder:d("password"),type:"password"}),e.jsx("button",{id:"signup_button",onClick:u,children:e.jsx(w,{children:"signin"})}),e.jsx("a",{onClick:()=>c("/signup"),style:{cursor:"pointer",textDecoration:"underline",color:"#0756b6ff"},children:d("dont_have_account")})]}),e.jsx(f,{})]})}export{I as default};
