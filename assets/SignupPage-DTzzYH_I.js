import{r as m,j as e,t as a,p as c,s as p,l as h}from"./index-Cl1-Dpx7.js";import{L as f}from"./language_selector-_TKSq08V.js";import"./dropdown-aj6y1QWA.js";function x(){const u=m.useRef([]);m.useEffect(()=>{for(let t=0;t<100;t++)u.current.push({x:window.innerWidth/100*t,y:Math.random()*window.innerHeight,speed:Math.random()+.5,index:t});const s=document.getElementById("bg_canvas"),i=s.getContext("2d");let r=performance.now();function l(){const t=performance.now(),d=(t-r)/1e3;r=t,s.width=window.innerWidth,s.height=window.innerHeight,i.clearRect(0,0,s.width,s.height),i.beginPath(),u.current.forEach(n=>{i.arc(n.x,n.y,5,0,2*Math.PI),n.x=window.innerWidth/100*n.index+Math.sin((performance.now()+n.index*2)*.005)*n.speed*10,n.y+=d*n.speed*12,n.y>window.innerHeight&&(n.y=-10)}),i.fillStyle="#ffffff55",i.fill(),requestAnimationFrame(l)}const o=document.getElementById("signup_form");o.style.scale="1",o.style.opacity="1",setTimeout(()=>{document.getElementById("bg_thing2").style.scale="1"},500),setTimeout(()=>{document.getElementById("bg_thing1").style.scale="1"},1200),l()},[]);function g(){const s=document.getElementById("email_input"),i=document.getElementById("login_input"),r=document.getElementById("password_input"),l=document.getElementById("password2_input"),o=document.getElementById("signup_form");if(r.value!==l.value){p("Passwords do not match"),o.classList.add("error"),setTimeout(()=>{o.classList.remove("error")},1e3);return}if(s.value.trim()===""||i.value.trim()===""||r.value.trim()===""){o.classList.add("error"),setTimeout(()=>{o.classList.remove("error")},1e3);return}fetch(`${h}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.value,username:i.value,password:r.value})}).then(t=>{t.json().then(d=>{t.ok?(localStorage.setItem("token",d.token),localStorage.setItem("id",d.id),localStorage.setItem("email",s.value),localStorage.setItem("username",i.value),c("/")):(p(d.msg||"Unknown error"),o.classList.add("error"),setTimeout(()=>{o.classList.remove("error")},1e3))})})}return e.jsxs("div",{className:"App",id:"app",children:[e.jsx("canvas",{id:"bg_canvas"}),e.jsx("div",{id:"bg_thing1"}),e.jsx("div",{id:"bg_thing2"}),e.jsxs("div",{className:"SignupForm",id:"signup_form",children:[e.jsx("input",{id:"email_input",placeholder:a("email")}),e.jsx("input",{id:"login_input",placeholder:a("login")}),e.jsx("input",{id:"password_input",placeholder:a("password"),type:"password"}),e.jsx("input",{id:"password2_input",placeholder:a("password_confirmation"),type:"password"}),e.jsx("button",{id:"signup_button",onClick:g,children:a("signup")}),e.jsx("a",{onClick:()=>c("/signin"),style:{cursor:"pointer",textDecoration:"underline",color:"#0756b6ff"},children:a("have_account")})]}),e.jsx(f,{})]})}export{x as default};
